# Poker Range Chart Practice
スマホを横向きにしたブラウザのみを対象とした、プリフロップレンジ暗記用のリアクションゲーム。

## 技術スタック
- **React 18.3.1** + **TypeScript 5.6.2**
- **Vite 6.0.5** (開発サーバー・ビルドツール)
- **ESLint** (コード品質管理)

## プロジェクト構造
```
src/
├── components/        # UIコンポーネント
│   ├── CardDisplay.tsx       # カード表示
│   ├── RangeChart.tsx        # レンジ表グリッド
│   ├── ProgressBar.tsx       # タイマー進捗バー
│   └── Modal.tsx             # 各種モーダル
├── utils/             # ユーティリティ関数
│   ├── cardUtils.ts          # カード生成・判定ロジック
│   └── rangeUtils.ts         # レンジ表生成ロジック
├── App.tsx            # メインアプリケーション
├── types.ts           # TypeScript型定義
└── constants.ts       # ゲーム設定定数
```

## 画面レイアウト
- **左エリア**: 2枚のトランプカードを柄と数字付きで表示。ジョーカーなし。同じカード2枚の組み合わせは出現しない。
- **右エリア**: 13×13のクロス集計表（列・行ともに `A → 2`）。セルはスート違いを区別し、例として `AKs` と `AKo` を別セルで扱う。
- **左端**: 縦方向に縮むプログレッシブバーで制限時間の残量を表示。
- **装飾**: 対角線（AA～22）は背景色 `#A9A9A9`、8行と8列の背景色は `#DCDCDC`。

## ゲームフロー
1. 初期状態はカードと表だけを背景表示し、モーダル中央に「スタートボタン」を配置。
2. スタートをタップするとモーダル内で3秒カウントダウン（中央に数字表示）後、モーダルを閉じる。
3. カードエリアにランダムで2枚のカードを提示。デッキは各問ごとに52枚から完全ランダム抽選（`cardUtils.ts`）。
4. 表上で対応するセルをタップする。正解するとスコア+1、すぐに次のカードが表示される。
5. 正解時は制限時間をリセットしつつ、持ち時間そのものを短縮。誤タップまたは制限時間切れで即ゲームオーバー。
6. ゲームオーバー画面では正解数と再挑戦用の「スタートボタン」を表示。

## 制限時間ルール
現在の設定（`src/constants.ts` で調整可能）:
- **初期制限時間**: 10秒（`INITIAL_TIME_LIMIT`）
- **短縮率**: 各正解後に15%短縮（`TIME_REDUCTION_RATE = 0.15`）
- **下限値**: 2秒（`MIN_TIME_LIMIT`）
- **カウントダウン**: 3秒（`COUNTDOWN_SECONDS`）

計算式: `新しい制限時間 = Math.max(MIN_TIME_LIMIT, 現在の制限時間 * (1 - TIME_REDUCTION_RATE))`

## タイマー実装
- `requestAnimationFrame` を使用したスムーズなアニメーション（App.tsx:182）
- 高精度なタイマー管理で、正確な制限時間制御を実現

## 主要な実装ロジック

### カード生成（`src/utils/cardUtils.ts`）
- `createDeck()`: 52枚のフルデッキ生成
- `shuffle()`: Fisher-Yates アルゴリズムでシャッフル
- `drawTwoCards()`: 2枚のカードをランダム抽選（同じカードは出現しない）
- `getCorrectCellKey()`: カードの組み合わせから正解セルキーを計算（AKs, AKo, AA など）

### レンジ表生成（`src/utils/rangeUtils.ts`）
- `generateRangeGrid()`: 13x13のレンジ表データを生成
- セルはsuited（s）、offsuit（o）、pair（ペア）を区別
- 対角線と8行/8列の背景色設定

## 開発コマンド
```bash
npm run dev      # 開発サーバー起動（http://localhost:5173）
npm run build    # プロダクションビルド
npm run preview  # ビルド結果のプレビュー
npm run lint     # ESLintでコードチェック
```

## 仕様上の補足
- カード抽選はラウンドごとにリセットされたフルデッキから行うため、同じカード組み合わせが繰り返し出る可能性がある。
- プログレッシブバーは色変化なしで、縦方向に残時間が減少するアニメーションのみ。
- 将来的なパラメータ調整に備え、時間管理やカード生成のロジックは `constants.ts` で一元管理。
- ゲーム状態は `GameState` 型で管理: `'start'` | `'countdown'` | `'playing'` | `'gameover'`
